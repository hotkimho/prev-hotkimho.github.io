---
layout: default
title: Functions
parent: Pipex

---
◦ fork
◦ waitpid
◦ wait
◦ free
◦ pipe
◦ dup
◦ dup2
◦ execve
◦ fork
◦ perror
◦ strerror
◦ exit

# __1. fork__
## 1. 헤더파일
```c
#include <unistd.h>
```

## 2. 함수 원형
```c
pid_t fork(void);
```

## 3. 반환 값
성공 시 부모 프로세스는 `자식 프로세스의 프로세스 ID` 리턴  
자식 프로세스는 `0` 리턴  
실패 시 `EOF` 리턴  

## 4. 함수 설명
`fork`함수는 프로세스를 생성하는 함수입니다.  
새롭게 생성된 프로세스를 `자식 프로세스`라고 하고 자식 프로세스를 만든 프로세스를 `부모 프로세스`라고 합니다.  
그리고 생성된 프로세스는 `프로세스 ID`라는 번호를 부여받아 운영체제에서 관리 하게 됩니다.  
우리 입장에선 프로세스 ID를 확인해도 이게 자식인지, 부모인지 구분할 수 없습니다.  
두 프로세스를 구분하는 유일한 방법은 fork함수의 `return value`을 확인하는 것입니다.  
fork함수는 프로세스 ID(이하 pid)를 반환합니다. 부모는 `자식 프로세스의 pid`를 반환하고, 자식은 `0`을 반환합니다.  
즉 fork함수의 반환값이 0이면 자식 프로세스, 아니면 부모 프로세스를 의미합니다.  
fork가 정상적으로 실행되지 않으면 `-1`을 반환하기 때문에 이 경우는 예외처리를 별도로 해주어야 합니다.  

## 5. 예시 코드
```c
#include <stdio.h>
#include <unistd.h>

int main(void)
{
	//프로세스 ID를 저장할 변수
	int pid;

	if ((pid = fork()) == -1)
		printf("프로세스 생성 실패\n");
	
	if (pid == 0)
		printf("(자식 프로세스) fork 리턴 값 : %d\n", pid);
	else
		printf("(부모 프로세스) fork 리턴 값 : %d\n", pid);
	printf("PID(%d) 종료\n", pid);
}
```
![return value](/docs/pipex/images/return_value.png)

코드를 보면 fork함수의 반환값을 `pid`변수에 담고, pid값이 0이면 자식 프로세스의 `pid 반환값`  
pid값이 0이 아니면 부모 프로세스의 `pid 반환값`을 출력한다.  
결과를 보면 부모 pid 반환값은 20573, 자식의 pid 반환값은 0을 의미한다는 걸 알 수 있다.  
그리고 실행 순서가 부모 실행 -> 부모 종료 -> 자식 실행 -> 자식 종료 순서로 결과가 나왔지만 항상 이 순서를 보장하지 않는다. 즉 `순차적으로 실행`되는게 아님을 주의 해야 한다.  
<br><br>

# __2. wait__
## 1. 헤더파일
```c
#include <sys/wait.h>
```

## 2. 함수 원형
```c
pid_t wait(int *wstatus);
```

## 3. 반환 값
성공 시 종료된 자식 프로세스의 ID 리턴  
실패 시 `EOF` 리턴  

## 4. 함수 설명
`fork`함수는 프로세스를 생성하는 함수입니다.  
새롭게 생성된 프로세스를 `자식 프로세스`라고 하고 자식 프로세스를 만든 프로세스를 `부모 프로세스`라고 합니다.  
그리고 생성된 프로세스는 `프로세스 ID`라는 번호를 부여받아 운영체제에서 관리 하게 됩니다.  
우리 입장에선 프로세스 ID를 확인해도 이게 자식인지, 부모인지 구분할 수 없습니다.  
두 프로세스를 구분하는 유일한 방법은 fork함수의 `return value`을 확인하는 것입니다.  
fork함수는 프로세스 ID(이하 pid)를 반환합니다. 부모는 `자식 프로세스의 pid`를 반환하고, 자식은 `0`을 반환합니다.  
즉 fork함수의 반환값이 0이면 자식 프로세스, 아니면 부모 프로세스를 의미합니다.  
fork가 정상적으로 실행되지 않으면 `-1`을 반환하기 때문에 이 경우는 예외처리를 별도로 해주어야 합니다.  

## 5. 예시 코드